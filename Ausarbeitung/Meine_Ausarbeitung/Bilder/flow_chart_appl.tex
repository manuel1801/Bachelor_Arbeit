\tikzset{
    decision/.style={
        diamond,
        draw,
        text width=4em,
        %minimum width=4em,
        text badly centered,
        inner sep=2pt,
        node distance=8em
    },
    block/.style={
        rectangle,
        draw,
        text width=7em,
        minimum height=2.5em,
        text centered,
        rounded corners,
        node distance=8em
    },
    arrow/.style={
        draw,
        >=latex,
        ->
    }
}


\begin{tikzpicture}

    \node (main) {\underline{main.py}};
    \node (detection) [right of=main, node distance=0.38\textwidth] {\underline{detection.py}};
    \node (connection) [left of=main, node distance=0.38\textwidth] {\underline{connection.py}};

    \node (motion) [decision, below of=main] {Motion\\Detection};
    \node (frame) [block, left of=motion, text width=5em, node distance=0.2\textwidth] {Frame};
    \node (buffer) [block, below of=motion] {Buffer};
    \node (infer) [block, right of=buffer, node distance=0.38\textwidth] {Inferenz};
    \node (threshhold) [decision, below of=infer,inner sep=1pt] {resp.p\\$>$det.p};
    \node (detframes) [block, below of=threshhold] {cls, p, N, Roi};
    \node (ndet) [decision, below of=detframes, inner sep=1pt] {N\\$>$10};
    \node (save) [block, below of=ndet] {save frame};
    \node (saved) [decision, left of=ndet, node distance=0.38\textwidth] {saved};
    \node (connected) [decision, left of=saved, node distance=0.38\textwidth] {connected};
    \node (connect) [block, above of=connected] {connect};
    \node (send) [block, below of=connected] {send};
    \node (false) [left of=connected, node distance=0.15\textwidth] {false};

    
    \draw[arrow] (frame) -- (motion);
    \draw[arrow] (motion) -- (buffer);
    \draw[arrow] (buffer) -- (infer);
    \draw[arrow] (infer) -- (threshhold);
    \draw[arrow] (threshhold) -- (detframes);
    \draw[arrow] (detframes) -- (ndet);
    \draw[arrow] (ndet) -- (save);
    \draw[arrow] (save) -| (saved);
    \draw[arrow] (saved) -- (connected);
    \draw[arrow] (connect) -- (connected);
    \draw[>=latex] (connected) -- (false);
    \draw[arrow] (false) |- (connect);

    %\draw[arrow] (connected.west) -| node[x=-0.5\textwidth] {false} (connect.west);
    \draw[arrow] (connected) -- (send);
    
    

    
    
    


    %\node (connected) [decision, left of=saved, node distance=0.4\textwidth] {Connec\\ed};
    % \node (B) [block, below of=A, node distance=3cm, text width=5em] {bock};
    % \node (C) [block, right of=A, node distance=0.5\textwidth] {noch ein\\bock};


    % \draw[arrow] (A) --  node [left, fill=white!30] {yes} (B);
    % \draw[arrow] (A) -- node [below, near end] {crap} (C); 
    % \draw[arrow] (B) -| node [near start, fill=white] {yes} (C);

\end{tikzpicture}
